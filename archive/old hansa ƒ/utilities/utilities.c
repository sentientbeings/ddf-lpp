/* This module contains little utility procedures that don't belong to 	*//* any one module														*/#include "utilities.h"#include "utilitiesP.h"char *concatP(s1, s2)char *s1, *s2;{	register int l1, l2, i;		l1 = s1[0];	l2 = s2[0];	s1[0] = l1+l2;	for (i = 1; i <= l2; i++)		s1[l1+i] = s2[i];	return s1;}unsigned DirectionToInMask(dir)enum direction dir;{	return directionToInMask[dir];}unsigned DirectionToOutMask(dir)enum direction dir;{	return directionToOutMask[dir];}Boolean HexLegal(Point p){	return (p.h >= 0) && (p.h < rowSize) && (p.v >= 0) && (p.v < columnSize);}void FatalError(OSErr err, Str255 messageString){	Str255	errorString;		if (err != noErr) {		ReportError(err, messageString);		ExitToShell();	}}void ReportError(OSErr err, Str255 messageString){	Str255 errorString;		NumToString(err, errorString);	ParamText(messageString, errorString, nullString, nullString);	Alert(rAlert, NULL);}void ReportNumbers(short num1, short num2, short num3, short num4){	Str255 err1, err2, err3, err4;		NumToString(num1, err1);	NumToString(num2, err2);	NumToString(num3, err3);	NumToString(num4, err4);	ParamText(err1, err2, err3, err4);	Alert(rAlert, NULL);}void FloatToString(stringP, val, places)Str255 stringP;float val;short places;{	Str255 placeString;	short placesPrinted;		NumToString((long) floor(val), stringP);	val -= floor(val);	if (val != 0.0) {		concatP((char *) stringP, (char *)"\p.");		placesPrinted = 0;		do {			val *= 10.0;			NumToString((long) floor(val), placeString);			concatP((char *) stringP, (char *) placeString);			placesPrinted++;		} while (((val -= floor(val)) != 0.0) && (placesPrinted != places));	}}void GetProductionTradeString(productionString, city, good)char *productionString;short city;enum goodTypes good;{	Str255 numberString;		productionString[0] = 0;	NumToString(GetProduction(city, good), numberString);	concatP((char *)productionString, (char *)numberString);	concatP((char *)productionString, (char *)"\p/");	NumToString(GetImportsExports(city, good), numberString);	concatP((char *)productionString, (char *)numberString);}unsigned short LaborAvailable(city)short city;{	return (baseLabor - GetLaborUsed(city) - GetMissionCost(city) - GetTotalTransportCosts(city, noCity));}/* how many bits are set in the passed unsigned value? */int NumberOfBits(testVal)unsigned testVal;{	unsigned i, total;		total = 0;	for (i = 0x1; i != 0; i <<= 1)		if (testVal & i)			total++;	return total;}void pStrCopy( p1, p2 )char *p1, *p2;/* copies a pascal string from p1 to p2 */{	register int len;		len = *p2++ = *p1++;	while (--len>=0) *p2++=*p1++;}