/* this file contains all the window stuff for the game Hanseatic League.					*/#include "windowsMapmaker.h"#include "windowsMapmakerP.h"/* public procedures *//* do the processing associated with the player doing something in one of our windows */void DoContent(theWindow, theEvent, typeOfEvent)WindowPtr	theWindow;EventRecord	*theEvent;enum mouseEventType typeOfEvent;{	ControlHandle 	goodH;	GrafPtr			savePort;	enum goodTypes 	good;	int 			city1, city2, type;	Point 			start, end;	Rect 			invalRect;	Str255			numberString;	char *temp;		GetPort(&savePort);	SetPort(theWindow);	start = (*theEvent).where;	GlobalToLocal(&start);	if (theWindow == GetMapWindow())		ChangeTerrain(start);	SetPort(savePort);}void DoWaitWindow(phase)enum buildPhase phase;{	Rect r;	static WindowPtr myWindow;	static TEHandle scriptH;	Ptr p;	Handle resourceH;	if (phase == finalPhase) {		CloseWindow(myWindow);		TEDispose(scriptH);		return;	}	if (phase == raiseContinentPhase) {		SetRect(&r, 50, 80, 470, 240);		SetPort((myWindow = NewWindow( 0L, &r, "\p", 1, 1, -1L, 0, 0L)));		TextFont(london);		TextSize(18);		scriptH = TENew(&(myWindow->portRect), &(myWindow->portRect));	}	EraseRect(&(myWindow->portRect));	resourceH = GetResource('TEXT', phaseWindow[phase]);	HLock(resourceH);	TESetText(*resourceH, GetHandleSize(resourceH), scriptH);	TEUpdate(&(myWindow->portRect), scriptH);	HUnlock(resourceH);	ReleaseResource(resourceH);}void DrawCity(location)Point location;{	Point centerPt;	Rect cityRect;		centerPt = GetCenterPt(location.h,location.v);	SetRect(&cityRect, centerPt.h-5, centerPt.v-5, centerPt.h+6, centerPt.v+6);	EraseOval(&cityRect);	FrameOval(&cityRect);}	void LostGame(){	DialogPtr p;	WindowPtr windP;		p = GetNewDialog(lostGameID, 0L, GetMapWindow());	SelectWindow(p);	DrawDialog(p);	do  {	} while (!Button());	ExitToShell();}/* do start of program window initialization. This initializes the savemap, builds the world, *//* though perhaps that whould be done elsewhere, and creates production and trade windows. */void SetUpWindows(){		InitSaveMap();	DrawMap(true);}/* what we do when an updateEvent occurs. */void UpdateWindow(theWindow)WindowPtr	theWindow;{	register short city;		BeginUpdate(theWindow);	if (theWindow == GetMapWindow())		CopySaveMap();	EndUpdate(theWindow);}/* private procedures */void WonGame(){	DialogPtr p;	WindowPtr windP;	int i;		for (i = 0; i < numberOfWinWindows; i++) {		p = GetNewDialog(WinGameID[i], 0L, GetMapWindow());		SelectWindow(p);		DrawDialog(p);		do {		} while (!Button());		CloseWindow(p);	}	ExitToShell();}