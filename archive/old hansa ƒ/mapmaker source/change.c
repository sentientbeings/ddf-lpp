/* this is the .c file for the code to change information about the map	*/#include "change.h"#include "changeP.h"/* public procedures */void ChangeMapType(mHandle, item)MenuHandle	mHandle;int item;{	int i;		for (i = 1; i <= lastChangeItem; i++)		CheckItem(mHandle, i, (i == item));	currentChangeItem = item;}void ChangeTerrain(mark)Point mark;{	Point hex;		hex = FindHex(mark);	switch (currentChangeItem) {		case cityChangeItem:		addCity(hex, false, false);		break;	case clearChangeItem:		SetTerrainType(hex.h, hex.v, same, clear);		break;			case desertChangeItem:		SetTerrainType(hex.h, hex.v, same, desert);		break;			case leagueCityItem:		addCity(hex, true, false);		break;	case mountainChangeItem:		SetTerrainType(hex.h, hex.v, same, mountain);		break;			case noTerrainChangeItem:		SetTerrainType(hex.h, hex.v, same, noTerrainType);		break;	case oceanChangeItem:		SetTerrainType(hex.h, hex.v, same, ocean);		break;			case riverChangeItem:		AddRiver(hex);		break;	case silkCityItem:		addCity(hex, false, true);		break;			case swampChangeItem:		SetTerrainType(hex.h, hex.v, same, swamp);		break;			case woodsChangeItem:		SetTerrainType(hex.h, hex.v, same, forest);		break;			}	DrawThisHex(hex.h, hex.v, true);	if (IsCityHere(hex.h, hex.v, same))		DrawCity(hex);	SaveMap();}/* private procedures *//* add a city to the map */void addCity(hex, inLeague, silkCity)Point hex;Boolean inLeague, silkCity;{	Str255 fn, fa;	Point SFPwhere;	SFReply reply;	SFPwhere.h = 90;	SFPwhere.v = 82;	NumToString(GetNumberOfCities(), fa);	fn[0] = 0;	SFPutFile(SFPwhere, fa, fn, 0L, &reply);	if ((reply.good) && (GetNumberOfCities() < maxNumberOfCities)) {		SetCityName(reply.fName);		SetCityIndex(hex, GetNumberOfCities());		SetLocation(GetNumberOfCities(), hex);		InitTradeRoot(GetNumberOfCities());		SetOfferRoot(GetNumberOfCities(), NULL);		SetMissionCost(GetNumberOfCities(), 0);		if (silkCity)			SetSilkProductionCost(GetNumberOfCities(), 4);		else SetSilkProductionCost(GetNumberOfCities(), 0);		IncrementNumberOfCities();	}	UpdateWindow(GetMapWindow());}	Point FindHex(mark)Point mark;{	Point returnP;		returnP.h = mark.h / hexWidthPlus1;	if ((returnP.h % 2) == 0)		mark.v += hexWidthDiv2-1;	returnP.v = mark.v / hexWidth;	return returnP;}