/* this is the .c file controlling the display icons. These icons are	*//* used to control what view of the map is currently being presented.	*//* There are 6 views controlled by the display:							*//*																		*//* 1) League. Display the current league icon.							*//* 2) Utility. Look at your league by utility.							*//* 3) Labor. Display the labor available for each city.					*//* 4-7) Look at your league by commodity. The cities in your league are	*//*    shown as sources or sinks of a commodity, and trade routes are 	*//*	  shown.															*/#include "display.h"#include "displayP.h"/* draw the current display window */void DrawDisplayWindow(){	short kind;	Handle iconH;	Rect drawRect;	GrafPtr	savePort;		GetPort(&savePort);	SetPort(displayWindow);	GetDItem(displayWindow, leagueB, &kind, &iconH, &drawRect);	SetDItem(displayWindow, leagueB, kind, (Handle) GetLeagueIcon(GetCurrentPlayer()), &drawRect);	DrawDialog(displayWindow);	/* fix up goods items */	if (GetCurrentView() != noGood) {		GetDItem(displayWindow, viewToButton[GetCurrentView()], &kind, &iconH, &drawRect);		InvertRect(&drawRect);	}		/* fix up the selection */		if (GetViewMode() != noView) {		GetDItem(displayWindow, viewModeToButton[GetViewMode()], &kind, &iconH, &drawRect);		InvertRect(&drawRect);	}		SetPort(savePort);}WindowPtr GetDisplayWindow(){	return displayWindow;}void InitDisplay(){	SetPort(displayWindow = GetNewDialog(displayID, 0L, (WindowPtr) -1L ));}/* someone has clicked in the display window. If it is on the 			*//* consumption/production icon, switch it; if it is on the current 		*//* league icon, beep, else, show the appropriate view					*/void ProcessDisplayEvent(int item){	SetPort(displayWindow);	switch (item) {	case wheatB:	case fishB:	case ironB:	case silkB:	case timberB:	case goldB:		if (GetCurrentView() == buttonToView[item])			SetCurrentView(noGood);		else SetCurrentView(buttonToView[item]);		break;			case normalB:	case productionB:	case consumptionB:	case productionCostB:	case laborB:	case utilityB:		if (GetViewMode() == buttonToViewMode[item])			SetViewMode(noView);		else SetViewMode(buttonToViewMode[item]);		break;	case leagueB:		SysBeep(1);		break;	}	DrawDisplayWindow();	CopyOffscreenMap(&(GetMapWindow()->portRect));	DrawCities();}