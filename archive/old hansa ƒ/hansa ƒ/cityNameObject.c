/* this is the .c file for the code controlling city names				*/#include "cityNameObject.h"#include "cityNameObjectP.h"StringPtr GetCityName(short city){	StringPtr nameP;	short i;		HLock(currentNameH);	nameP =  (StringPtr) (*currentNameH+2);	for (i = 0; i != city; i++)		nameP += nameP[0] + 1;	HUnlock(currentNameH);	return nameP;}void DestroyCityNameObject(void){	DisposHandle(currentNameH);}void InitCityNameObject(void){	StringPtr p;		if (currentNameH != NULL)		DisposHandle(currentNameH);	currentNameH = GetNamedResource('STR#', "\pcity names");	DetachResource(currentNameH);	p = (StringPtr) *currentNameH;	SetNumberOfCities((p[0] << 8) + p[1]);}void SaveCityNameObject(void){	AddResource(currentNameH, 'STR#', UniqueID('STR#'), "\pcity names");	WriteResource(currentNameH);	DetachResource(currentNameH);}void SetCityName(Str255 name){	StringPtr p, nameP;	int i;		if (currentNameH == NULL) {		currentNameH = NewHandle(name[0]+3);		p = (StringPtr) *currentNameH;		p[0] = 0;		p[1] = 0;	}	else SetHandleSize(currentNameH, GetHandleSize(currentNameH) + name[0]+1);	p = (StringPtr) *currentNameH;	nameP = (StringPtr)(*currentNameH+2);	for (i = 0; i < p[1]; i++)		nameP += nameP[0]+1;	pStrCopy((char *)name, (char *)nameP);	p[1]++;}