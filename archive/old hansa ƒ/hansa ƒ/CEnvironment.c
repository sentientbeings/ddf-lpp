// CEnvironment tells all about the environment of the machine we are on#include "CEnvironment.h"#include <GestaltEqu.h>#include <OSChecks.h>#include <Script.h>#include <Traps.h>CEnvironment::CEnvironment(){		OSErr		err;	SysEnvRec	environs;	long		response;		this->hasGestalt = TrapAvailable( _GestaltDispatch);	this->hasWNE = WNEIsImplemented();	this->hasScriptMgr = TrapAvailable( _ScriptUtil);	err = SysEnvirons( 1, &environs);	if (err == noErr)	{		this->hasColorQD = environs.hasColorQD;		this->hasFPU = environs.hasFPU;		this->systemVersion = environs.systemVersion;	}	else	{		this->hasColorQD = FALSE;		this->hasFPU = FALSE;		this->systemVersion = 0;	}			if (this->hasGestalt)	{		this->hasAppleEvents = Gestalt( gestaltAppleEventsAttr, &response) == noErr;		this->hasAliasMgr = Gestalt( gestaltAliasMgrAttr, &response) == noErr;		this->hasEditionMgr = Gestalt( gestaltEditionMgrAttr, &response) == noErr;		this->hasHelpMgr = Gestalt( gestaltHelpMgrAttr, &response) == noErr;		if (this->hasScriptMgr)		{			err = Gestalt( gestaltScriptCount, &response);			if (err == noErr)				this->scriptsInstalled = (short) response;		}	}	else	{		/* If we don't have Gestalt, then we can't have any System 7 features	*/				this->hasAppleEvents = FALSE;		this->hasAliasMgr = FALSE;		this->hasEditionMgr = FALSE;		this->hasHelpMgr = FALSE;		if (this->hasScriptMgr)			this->scriptsInstalled = GetEnvirons( smEnabled);				}}Boolean CEnvironment::HasColor(){	return this->hasColorQD;}Boolean CEnvironment::HasHelpManager(){	return this->hasHelpMgr;}