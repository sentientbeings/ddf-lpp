/* this is the .c file for the cityIndexObject module. It contains code	*//* for the primitive operations pertaining to where a city is.			*//*																		*//* Modification History:												*//*																		*//* 28 Jan 1990 tomc creation. Split off from city.c						*/#include "cityIndexObject.h"#include "cityIndexObjectP.h"void CreateCityIndex(void){	Point p;		cityIndexH = NewHandle(columnSize*rowSize*sizeof(short));	p.h = rowSize;	while (--p.h >= 0) {		p.v = columnSize;		while (--p.v >= 0) 			SetCityIndex(p, noCity);	}			}short GetCityIndex(Point p){	const Point errHex = {-1, -1 };	short *cP;		if (EqualPt(p, errHex))		return noCity;	cP = (short *) *cityIndexH;	return cP[(p.h * columnSize) + p.v];}void DestroyCityIndexObject(void){	DisposHandle(cityIndexH);}void RestoreCityIndexObject(void){	cityIndexH = GetNamedResource('TABL', "\pcity index");	DetachResource(cityIndexH);	if (cityIndexH == NULL)		CreateCityIndex();}/* write city index info */void SaveCityIndexObject(void){	AddResource(cityIndexH, 'TABL', UniqueID('TABL'), "\pcity index");	WriteResource(cityIndexH);	DetachResource(cityIndexH);}void SetCityIndex(Point p, short val){	short *cP;		cP = (short *) *cityIndexH;	cP[(p.h * columnSize) + p.v] = val;}