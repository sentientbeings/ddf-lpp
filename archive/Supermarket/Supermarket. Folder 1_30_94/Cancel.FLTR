'============================================================================='=                         Copyright 1992 Stazª Software, Inc.               ='=                               All rights reserved                         ='=                             "Cancel.FLTR" from PG:PRO                     ='=     This FLTR converts an ESCape key press to a "Cancel" button click     ='=============================================================================INCLUDE FILE _aplInclCOMPILE 0,_MacsbugLabels_strResource_caseInsensitive'set by PG:PROGLOBALS "PG PRO.GLBL"'include PG stuffEND GLOBALS'end of our globalsGOTO"Cancel Filter"'============================================================================LOCAL FN checkCancel'==========================================================================myCtrlHndl& = [WINDOW(14)+_wControlList]'get handle to 1st ctrlWHILE myCtrlHndl&'valid handle?CALL GETCTITLE(myCtrlHndl&,cTitle$)'get control's titleLONG IF UCASE$(cTitle$)="CANCEL"'it's a cancel buttonLONG IF PEEK([myCtrlHndl&]+_contrlHilite) <> 255'it's activegAction       = _buttonAction'action constantgWhichButton  = USR HANDLE2BTN(myCtrlHndl&)'clicked buttongButtonValue  = BUTTON(gWhichButton)'current btn valuegControlHndl& = myCtrlHndl&'get control's handleCALL GETCTITLE(myCtrlHndl&,gControlTitle$)'send control's titlemyCtrlHndl&   = 0'to end the WHILE/WENDBUTTON gWhichButton,2:DELAY 250'invert & delayBUTTON gWhichButton,1'restore buttonXELSE'disabled?myCtrlHndl& = [[myCtrlHndl&]]'get next controlEND IFXELSE'not "Cancel"?myCtrlHndl& = [[myCtrlHndl&]]'get next controlEND IFWENDEND FN'============================================================================"Cancel Filter"LONG IF gAction = _otherAction'misc action?LONG IF gSubAction = _otherFilterEvent'raw Mac event?LONG IF gWhat = _keydwnevt'key press?LONG IF {@gMessage&+2} = &351B'esc key?FN checkCancel'process it!END IFEND IFEND IFEND IF'============================================================================